/**
    *          |>
    *        \_|___/
    * CuttySSark
    *
    *
    * Cutty allows you to navigate the wild waters of event-driven style changes! It's a lightweight polyfill
    * adding support for JS event triggering and matching in stylesheets using standard CSS2 selectors.
    *
    *
    * @author     Devin Ivy
    * @email      devin@bigroomstudios.com
    * @website    http://devinivy.com
    *
    * @dependency jQuery 1.7+
    * @version    1.0
    *
    * @license    MIT
    * @enjoy
    *
    */
!function(){var e=null,t=function(){var e;for(e=0;e<document.styleSheets.length;e++)u(document.styleSheets[e]);$("body").trigger("cutty")},n=function(){var t;for(t=0;t<document.styleSheets.length;t++){ss=document.styleSheets[t];var n=ss.ownerNode||ss.owningElement;if(null===n.getAttribute("data-cutty-bypass")){e=void 0!==ss.cssRules?"cssRules":"rules";break}}},r=function(e,t,n,r){"off"!=n&&$(e).each(function(e,i){(1!=$(i).data(t+"|"+n)||"trigger"==n)&&(eventInfo={kid:i,option:n,extras:r},$(i).on(t,eventInfo,s),$(i).data(t+"|"+n,!0))})},s=function(e){switch(kid=e.data.kid,option=e.data.option,extras=e.data.extras,newEvent=e.type,option){case"once":newEvent+="|once",1==$(e.target).data(newEvent+"|executed")||o(kid,newEvent)||a(kid,newEvent),$(e.target).data(newEvent+"|executed",!0);break;case"clear":newEvent+="|clear",c(kid),a(kid,newEvent);break;case"state":newEvent+="|state",g(kid),a(kid,newEvent);break;case"toggle":offEvent=newEvent+"|off",newEvent+="|toggle",o(kid,newEvent)?(a(kid,offEvent),l(kid,newEvent)):(a(kid,newEvent),l(kid,offEvent));break;case"trigger":if(parseTrigger=/^([^\(]+)\(([^\)]+)\)$/,triggerInfo=parseTrigger.exec(extras),triggerInfo&&triggerInfo.length>2){switch(event=triggerInfo[1],triggerKids=triggerInfo[2]){case"next":triggerKids=$(kid).next(),triggerKids.length||(triggerKids=$(kid).siblings().first());break;case"prev":triggerKids=$(kid).prev(),triggerKids.length||(triggerKids=$(kid).siblings().last());break;case"parent":triggerKids=$(kid).parent();break;case"self":triggerKids=$(kid);break;default:triggerKids=$(triggerKids)}triggerKids.trigger(event)}break;default:o(kid,newEvent)||a(kid,newEvent)}},i=function(e){return currentEvents=$(e).attr("on"),currentEvents="undefined"==typeof currentEvents?"":currentEvents},o=function(e,t){currentEvents=i(e).split(" ");var n;for(n=0;n<currentEvents.length;n++)if(t==currentEvents[n])return!0;return!1},a=function(e,t){currentEvents=i(e),newEvents=currentEvents+" "+t,newEvents=newEvents.trim(),$(e).attr("on",newEvents)},l=function(e,t){currentEvents=i(e).split(" "),newEvents="";var n;for(n=0;n<currentEvents.length;n++)t!=currentEvents[n]&&(newEvents+=currentEvents[n]+" ");newEvents=newEvents.trim(),$(e).attr("on",newEvents)},g=function(e){stateRegex=/\|state$/,newEvents="",currentEvents=i(e).split(" ");var t;for(t=0;t<currentEvents.length;t++)stateRegex.exec(currentEvents[t])||(newEvents+=currentEvents[t]+" ");newEvents=newEvents.trim(),$(e).attr("on",newEvents)},c=function(e){$(e).attr("on","")},u=function(t){null==e&&n();var r=t.ownerNode||t.owningElement;if(null===r.getAttribute("data-cutty-bypass")&&t[e]&&t[e].length>0&&null===r.getAttribute("data-cutty-processed")){var s,i,o;for(s=0;s<t[e].length;s++)if(o=t[e][s],o[e]&&o[e].length>0)for(i=0;i<o[e].length;i++)v(o[e][i].selectorText,o[e][i].style);else v(o.selectorText,o.style);r.setAttribute("data-cutty-processed","")}},v=function(e){if(e){var t=/(\[on\~\=[\'\"][^\'\"]+[\'\"]\])+/,n=/on\~\=[\'\"]([^\'\"]+)[\'\"]/;selectors=e.split(",");var s;for(s=0;s<selectors.length;s++)if(selector=selectors[s].trim(),multiResult=t.exec(selector),null!=multiResult){baseSelector=selector.substring(0,multiResult.index),onSelectors=multiResult[0].split("][");var i;for(i=0;i<onSelectors.length;i++)onSelector=onSelectors[i],singleResult=n.exec(onSelector),singleResult&&(withOptions=singleResult[1].split("|"),event=withOptions[0],register=!0,option="",extras="",withOptions.length>1&&(option=withOptions[1]),withOptions.length>2&&(extras=withOptions[2]),register&&r(baseSelector,event,option,extras))}}};$(t)}();